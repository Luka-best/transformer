# MMS

## ูุธุฑุฉ ุนุงูุฉ

ุงูุชุฑุญ ูููุฐุฌ MMS ูู [ุชูุณูุน ูุทุงู ุชูููุฉ ุงูููุงู ุฅูู 1000+ ูุบุฉ](https://arxiv.org/abs/2305.13516) ูู ูุจู ููููู ุจุฑุงุชุงุจุ ูุฃูุฏุฑูุฒ ุชูุฌุงูุฏุฑุงุ ูุจููู ุดูุ ูุจุงุฏู ุชููุงุณูููุ ูุฃุฑูู ุจุงุจูุ ูุณุงูุงู ูููุฏูุ ูุนูู ุงููุญููุ ูุฒูุงูููุฌ ููุ ูุฃุจูุฑู ููุงุณุ ููุฑูู ูุงุถู ุฒุฑุงูุฏูุ ูุฃูููุณู ุจุงููุณููุ ูููุณู ุนุฏูุ ูุดูุงูููู ุชุดุงูุฌุ ููู-ูููุฌ ูุณูุ ูุฃูููุณูุณ ููููุ ููุงููู ุฃููู.

ุงูููุฎุต ูู ุงููุฑูุฉ ูู ูุง ููู:

*ุฅู ุชูุณูุน ูุทุงู ุชุบุทูุฉ ุงููุบุฉ ูุชูููููุฌูุง ุงูููุงู ูุญูู ุฅููุงููุฉ ุชุญุณูู ุงููุตูู ุฅูู ุงููุนูููุงุช ููุนุฏูุฏ ูู ุงูุฃุดุฎุงุต. ููุน ุฐููุ ุชูุชุตุฑ ุชูููุฉ ุงูููุงู ุงูุญุงููุฉ ุนูู ุญูุงูู ูุงุฆุฉ ูุบุฉุ ููู ุฌุฒุก ุตุบูุฑ ูู ุฃูุซุฑ ูู 7000 ูุบุฉ ููุทููุฉ ูู ุฌููุน ุฃูุญุงุก ุงูุนุงูู. ูุฒูุฏ ูุดุฑูุน ุงูููุงู ูุชุนุฏุฏ ุงููุบุงุช ุจุดูู ูุจูุฑ ูู ุนุฏุฏ ุงููุบุงุช ุงููุฏุนููุฉ ุจููุฏุงุฑ 10-40 ูุฑุฉุ ุญุณุจ ุงููููุฉ. ุงูููููุงุช ุงูุฑุฆูุณูุฉ ูู ูุฌููุนุฉ ุจูุงูุงุช ุฌุฏูุฏุฉ ุชุณุชูุฏ ุฅูู ูุฑุงุกุงุช ุงููุตูุต ุงูุฏูููุฉ ุงููุชุงุญุฉ ููุฌูููุฑ ูุงูุงุณุชูุงุฏุฉ ุงููุนุงูุฉ ูู ุงูุชุนูู ุงูุฐุงุชู. ูููุง ุจุจูุงุก ููุงุฐุฌ Wav2Vec 2.0 ูุณุจูุฉ ุงูุชุฏุฑูุจ ุชุบุทู 1406 ูุบุฉุ ููููุฐุฌ ูุงุญุฏ ูุชุนุฏุฏ ุงููุบุงุช ููุชุนุฑู ุงูุชููุงุฆู ุนูู ุงูููุงู ูู 1107 ูุบุฉุ ูููุงุฐุฌ ุชุฑููุจ ุงูููุงู ูููุณ ุนุฏุฏ ุงููุบุงุชุ ุจุงูุฅุถุงูุฉ ุฅูู ูููุฐุฌ ูุชุญุฏูุฏ ุงููุบุฉ ูู 4017 ูุบุฉ. ุชูุธูุฑ ุงูุชุฌุงุฑุจ ุฃู ูููุฐุฌ ุงูุชุนุฑู ุนูู ุงูููุงู ูุชุนุฏุฏ ุงููุบุงุช ูุฏููุง ูููู ูู ูุนุฏู ุฎุทุฃ ุงููููุฉ ูู Whisper ุฅูู ุงููุตู ูุฃูุซุฑ ูู 54 ูุบุฉ ูู ูุนูุงุฑ FLEURS ุจูููุง ูุชู ุชุฏุฑูุจู ุนูู ุฌุฒุก ุตุบูุฑ ูู ุงูุจูุงูุงุช ุงููููุณูุฉ.*

ูููุง ููู ุงูููุงุฐุฌ ุงููุฎุชููุฉ ููุชูุญุฉ ุงููุตุฏุฑ ูู ูุดุฑูุน MMS. ุชู ุฅุตุฏุงุฑ ุงูููุงุฐุฌ ูุงูุฑูุฒ ุงูุฃุตูู [ููุง](https://github.com/facebookresearch/fairseq/tree/main/examples/mms). ููุฏ ุฃุถููุงูุง ุฅูู ุฅุทุงุฑ ุนูู ุงููุญููุงุชุ ููุง ูุฌุนููุง ุฃุณูู ูู ุงูุงุณุชุฎุฏุงู.

### ุงูุชุนุฑู ุงูุชููุงุฆู ุนูู ุงูููุงู (ASR)

ูููู ุงูุนุซูุฑ ุนูู ููุงุท ุชูุชูุด ูููุฐุฌ ASR ููุง: [mms-1b-fl102](https://huggingface.co/facebook/mms-1b-fl102)ุ [mms-1b-l1107](https://huggingface.co/facebook/mms-1b-l1107)ุ [mms-1b-all](https://huggingface.co/facebook/mms-1b-all). ููุญุตูู ุนูู ุฃูุถู ุฏูุฉุ ุงุณุชุฎุฏู ูููุฐุฌ `mms-1b-all`.

ูุตุงุฆุญ:

- ุชูุจู ุฌููุน ููุงุฐุฌ ASR ูุตูููุฉ ุนุงุฆูุฉ ุชุชูุงูู ูุน ุงูููุฌุฉ ุงูุตูุชูุฉ ููุฅุดุงุฑุฉ ุงูุตูุชูุฉ. ูุฌุจ ูุนุงูุฌุฉ ุงูููุฌุฉ ุงูุตูุชูุฉ ุงูุฎุงู ูุณุจููุง ุจุงุณุชุฎุฏุงู [`Wav2Vec2FeatureExtractor`].
- ุชู ุชุฏุฑูุจ ุงูููุงุฐุฌ ุจุงุณุชุฎุฏุงู ุงูุชุตููู ุงูุฒููู ููุงุชุตุงู (CTC)ุ ูุฐูู ูุฌุจ ูู ุชุดููุฑ ุฅุฎุฑุงุฌ ุงููููุฐุฌ ุจุงุณุชุฎุฏุงู [`Wav2Vec2CTCTokenizer`].
- ููููู ุชุญููู ุฃูุฒุงู ูุญูู ูุบุฉ ูุฎุชููุฉ ููุบุงุช ูุฎุชููุฉ ุนุจุฑ [`~Wav2Vec2PreTrainedModel.load_adapter`]. ุชุชููู ูุญููุงุช ุงููุบุฉ ูู ุญูุงูู ูููููู ูุนููุฉ ููุท ููููู ุชุญููููุง ุจููุงุกุฉ ุฃุซูุงุก ุงูุชููู ุนูุฏ ุงูุญุงุฌุฉ.

#### ุงูุชุญููู

ูุญูู MMS ุจุดูู ุงูุชุฑุงุถู ุฃูุฒุงู ุงููุญูู ููุบุฉ ุงูุฅูุฌููุฒูุฉ. ุฅุฐุง ููุช ุชุฑูุฏ ุชุญููู ุฃูุฒุงู ูุญูู ูุบุฉ ุฃุฎุฑูุ ูุชุฃูุฏ ูู ุชุญุฏูุฏ `target_lang=<your-chosen-target-lang>` ููุฐูู `"ignore_mismatched_sizes=True`.

ูุฌุจ ุชูุฑูุฑ ุงููููุฉ ุงูุฃุณุงุณูุฉ `ignore_mismatched_sizes=True` ููุณูุงุญ ุจุฑุฃุณ ูููุฐุฌ ุงููุบุฉ ูุฅุนุงุฏุฉ ุงูุญุฌู ููููุง ููุนุฌู ุงููุบุฉ ุงููุญุฏุฏุฉ.

ูุจุงููุซูุ ูุฌุจ ุชุญููู ุงููุนุงูุฌ ุจููุณ ุงููุบุฉ ุงููุณุชูุฏูุฉ:

```py
from transformers import Wav2Vec2ForCTC, AutoProcessor

model_id = "facebook/mms-1b-all"
target_lang = "fra"

processor = AutoProcessor.from_pretrained(model_id, target_lang=target_lang)
model = Wav2Vec2ForCTC.from_pretrained(model_id, target_lang=target_lang, ignore_mismatched_sizes=True)
```

<Tip>

ููููู ุชุฌุงูู ุชุญุฐูุฑ ูุซู:

```text
ูู ูุชู ุชููุฆุฉ ุจุนุถ ุฃูุฒุงู Wav2Vec2ForCTC ูู ููุทุฉ ุชูุชูุด ุงููููุฐุฌ ูู facebook/mms-1b-all ููู ูููุฃุฉ ุญุฏูุซูุง ูุฃู ุงูุฃุดูุงู ูู ุชุชุทุงุจู:
- lm_head.bias: ุชู ุงูุนุซูุฑ ุนูู ุงูุดูู torch.Size([154]) ูู ููุทุฉ ุงูุชูุชูุด ูุงูุดูู torch.Size([314]) ูู ุงููููุฐุฌ ุงูุฐู ุชู ุชุซุจูุชู
- lm_head.weight: ุชู ุงูุนุซูุฑ ุนูู ุงูุดูู torch.Size([154ุ 1280]) ูู ููุทุฉ ุงูุชูุชูุด ูุงูุดูู torch.Size([314ุ 1280]) ูู ุงููููุฐุฌ ุงูุฐู ุชู ุชุซุจูุชู
ูุฌุจ ุนููู ุนูู ุงูุฃุฑุฌุญ ุชุฏุฑูุจ ูุฐุง ุงููููุฐุฌ ุนูู ูููุฉ ูุฃุณูู ูุชุชููู ูู ุงุณุชุฎุฏุงูู ููุชูุจุคุงุช ูุงูุงุณุชุฏูุงู.
```

</Tip>

ุฅุฐุง ููุช ุชุฑูุฏ ุงุณุชุฎุฏุงู ุฎุท ุฃูุงุจูุจ ASRุ ูููููู ุชุญููู ูุบุฉ ูุณุชูุฏูุฉ ุงูุชู ุงุฎุชุฑุชูุง ุนูู ุงููุญู ุงูุชุงูู:

```py
from transformers import pipeline

model_id = "facebook/mms-1b-all"
target_lang = "fra"

pipe = pipeline(model=model_id, model_kwargs={"target_lang": "fra", "ignore_mismatched_sizes": True})
```

#### ุงูุงุณุชุฏูุงู

ุจุนุฏ ุฐููุ ุฏุนููุง ูููู ูุธุฑุฉ ุนูู ููููุฉ ุชุดุบูู MMS ูู ุงูุงุณุชุฏูุงู ูุชุบููุฑ ุทุจูุงุช ุงููุญูู ุจุนุฏ ุงุณุชุฏุนุงุก [`~PretrainedModel.from_pretrained`]

ุฃููุงูุ ูููู ุจุชุญููู ุจูุงูุงุช ุงูุตูุช ุจูุบุงุช ูุฎุชููุฉ ุจุงุณุชุฎุฏุงู [Datasets](https://github.com/huggingface/datasets).

```py
from datasets import load_dataset, Audio

# English
stream_data = load_dataset("mozilla-foundation/common_voice_13_0", "en", split="test", streaming=True)
stream_data = stream_data.cast_column("audio", Audio(sampling_rate=16000))
en_sample = next(iter(stream_data))["audio"]["array"]

# French
stream_data = load_dataset("mozilla-foundation/common_voice_13_0", "fr", split="test", streaming=True)
stream_data = stream_data.cast_column("audio", Audio(sampling_rate=16000))
fr_sample = next(iter(stream_data))["audio"]["array"]
```

ุจุนุฏ ุฐููุ ูููู ุจุชุญููู ุงููููุฐุฌ ูุงููุนุงูุฌ:

```py
from transformers import Wav2Vec2ForCTC, AutoProcessor
import torch

model_id = "facebook/mms-1b-all"

processor = AutoProcessor.from_pretrained(model_id)
model = Wav2Vec2ForCTC.from_pretrained(model_id)
```

ุงูุขู ูููู ุจูุนุงูุฌุฉ ุจูุงูุงุช ุงูุตูุชุ ูุฅุฑุณุงู ุจูุงูุงุช ุงูุตูุช ุงููุนุงูุฌุฉ ุฅูู ุงููููุฐุฌุ ููููู ุจููู ุฅุฎุฑุงุฌ ุงููููุฐุฌุ ุชูุงููุง ูุซููุง ููุนู ุนุงุฏุฉู ูู [`Wav2Vec2ForCTC`].

```py
inputs = processor(en_sample, sampling_rate=16_000, return_tensors="pt")

with torch.no_grad():
outputs = model(**inputs).logits

ids = torch.argmax(outputs, dim=-1)[0]
transcription = processor.decode(ids)
# 'joe keton disapproved of films and buster also had reservations about the media'
```

ุงูุขู ูููููุง ุงูุงุญุชูุงุธ ุจููุณ ุงููููุฐุฌ ูู ุงูุฐุงูุฑุฉ ูุงูุชุจุฏูู ุจุจุณุงุทุฉ ุจูู ูุญููุงุช ุงููุบุฉ ุนู ุทุฑูู

ุงุณุชุฏุนุงุก ูุธููุฉ [`~Wav2Vec2ForCTC.load_adapter`] ุงูููุงุฆูุฉ ูููููุฐุฌ ู [`~Wav2Vec2CTCTokenizer.set_target_lang`] ูููุนุงูุฌ.

ููุฑุฑ ุงููุบุฉ ุงููุณุชูุฏูุฉ ูุฅุฏุฎุงู - `"fra"` ูููุฑูุณูุฉ.

```py
processor.tokenizer.set_target_lang("fra")
model.load_adapter("fra")

inputs = processor(fr_sample, sampling_rate=16_000, return_tensors="pt")

with torch.no_grad():
outputs = model(**inputs).logits

ids = torch.argmax(outputs, dim=-1)[0]
transcription = processor.decode(ids)
# "ce dernier est volรฉ tout au long de l'histoire romaine"
```

ูุจููุณ ุงูุทุฑููุฉุ ูููู ุงุณุชุจุฏุงู ุงููุบุฉ ูุฌููุน ุงููุบุงุช ุงูุฃุฎุฑู ุงููุฏุนููุฉ. ูุฑุฌู ุงูุงุทูุงุน ุนูู:

```py
processor.tokenizer.vocab.keys()
```

ููุนุฑูุฉ ุฌููุน ุงููุบุงุช ุงููุฏุนููุฉ.

ูููุฒูุฏ ูู ุชุญุณูู ุงูุฃุฏุงุก ูู ููุงุฐุฌ ASRุ ูููู ุงุณุชุฎุฏุงู ูู ุชุดููุฑ ูููุฐุฌ ุงููุบุฉ. ุฑุงุฌุน ุงููุซุงุฆู [ููุง](https://huggingface.co/facebook/mms-1b-all) ููุฒูุฏ ูู ุงูุชูุงุตูู.

### ุชุฑููุจ ุงูููุงู (TTS)

ูุณุชุฎุฏู MMS-TTS ููุณ ุจููุฉ ุงููููุฐุฌ ูุซู VITSุ ูุงูุชู ุชู ุฅุถุงูุชูุง ุฅูู ๐ค ุงููุญููุงุช ูู v4.33. ูููู MMS ุจุชุฏุฑูุจ ููุทุฉ ุชูุชูุด ูููุฐุฌ ูููุตูุฉ ููู ูู 1100+ ูุบุฉ ูู ุงููุดุฑูุน. ูููู ุงูุนุซูุฑ ุนูู ุฌููุน ููุงุท ุงูุชูุชูุด ุงููุชุงุญุฉ ุนูู Hugging Face Hub: [facebook/mms-tts](https://huggingface.co/models?sort=trending&search=facebook%2Fmms-tts)ุ ููุซุงุฆู ุงูุงุณุชุฏูุงู ุชุญุช [VITS](https://huggingface.co/docs/transformers/main/en/model_doc/vits).

#### ุงูุงุณุชุฏูุงู

ูุงุณุชุฎุฏุงู ูููุฐุฌ MMSุ ูู ุฃููุงู ุจุชุญุฏูุซ ุฃุญุฏุซ ุฅุตุฏุงุฑ ูู ููุชุจุฉ ุงููุญููุงุช:

```bash
pip install --upgrade transformers accelerate
```

ูุธุฑูุง ูุฃู ุงููููุฐุฌ ุงููุงุฆู ุนูู ุงูุชุฏูู ูู VITS ุบูุฑ ูุญุฏุฏุ ููู ุงูุฌูุฏ ุชุญุฏูุฏ ุงูุจุฐูุฑ ูุถูุงู ุฅููุงููุฉ ุฅุนุงุฏุฉ ุฅูุชุงุฌ ุงูุฅุฎุฑุงุฌ.

- ุจุงููุณุจุฉ ููุบุงุช ุฐุงุช ุงูุฃุจุฌุฏูุฉ ุงูุฑููุงููุฉุ ูุซู ุงูุฅูุฌููุฒูุฉ ุฃู ุงููุฑูุณูุฉุ ูููู ุงุณุชุฎุฏุงู ุงููุนุงูุฌ ูุจุงุดุฑุฉู ููุนุงูุฌุฉ ุฅุฏุฎุงูุงุช ุงููุต. ูููู ูุซุงู ุงูููุฏ ุงูุชุงูู ุจุชุดุบูู ุชูุฑูุฑ ุฅูู ุงูุฃูุงู ุจุงุณุชุฎุฏุงู ููุทุฉ ุชูุชูุด MMS-TTS ุงูุฅูุฌููุฒูุฉ:

```python
import torch
from transformers import VitsTokenizer, VitsModel, set_seed

tokenizer = VitsTokenizer.from_pretrained("facebook/mms-tts-eng")
model = VitsModel.from_pretrained("facebook/mms-tts-eng")

inputs = tokenizer(text="Hello - my dog is cute", return_tensors="pt")

set_seed(555)  # make deterministic

with torch.no_grad():
    outputs = model(**inputs)

waveform = outputs.waveform[0]
```

ูููู ุญูุธ ุงูููุฌุฉ ุงููุงุชุฌุฉ ูููู `.wav`:

```python
import scipy

scipy.io.wavfile.write("synthesized_speech.wav", rate=model.config.sampling_rate, data=waveform)
```

ุฃู ุนุฑุถูุง ูู Jupyter Notebook / Google Colab:

```python
from IPython.display import Audio

Audio(waveform, rate=model.config.sampling_rate)
```

ุจุงููุณุจุฉ ููุบุงุช ูุนููุฉ ุฐุงุช ุฃุจุฌุฏูุงุช ุบูุฑ ุฑููุงููุฉุ ูุซู ุงูุนุฑุจูุฉ ุฃู ุงููุงูุฏุฑูู ุฃู ุงูููุฏูุฉุ ุชููู ุญุฒูุฉ [`uroman`](https://github.com/isi-nlp/uroman)

ูุทููุจ perl ููุนุงูุฌุฉ ุฅุฏุฎุงูุงุช ุงููุต ุฅูู ุงูุฃุจุฌุฏูุฉ ุงูุฑููุงููุฉ.

ููููู ุงูุชุญูู ููุง ุฅุฐุง ููุช ุจุญุงุฌุฉ ุฅูู ุญุฒูุฉ `uroman` ููุบุฉ ุงูุฎุงุตุฉ ุจู ุนู ุทุฑูู ูุญุต ุณูุฉ `is_uroman`

ูู ุงููุนุงูุฌ ุงูููุฏุฑุจ ูุณุจููุง:

```python
from transformers import VitsTokenizer

tokenizer = VitsTokenizer.from_pretrained("facebook/mms-tts-eng")
print(tokenizer.is_uroman)
```

ุฅุฐุง ูุฒู ุงูุฃูุฑุ ููุฌุจ ุชุทุจูู ุญุฒูุฉ uroman ุนูู ุฅุฏุฎุงูุงุช ุงููุต **ูุจู** ุชูุฑูุฑูุง ุฅูู `VitsTokenizer`ุ

ุญูุซ ุฃู ุงููุนุงูุฌ ูุง ูุฏุนู ุญุงูููุง ุฅุฌุฑุงุก ุงููุนุงูุฌุฉ ุงููุณุจูุฉ ุจููุณู.

ููููุงู ุจุฐููุ ูู ุฃููุงู ุจุงุณุชูุณุงุฎ ูุณุชูุฏุน uroman ุนูู ุฌูุงุฒู ุงููุญูู ููู ุจุชุนููู ูุชุบูุฑ bash `UROMAN` ุฅูู ุงููุณุงุฑ ุงููุญูู:

```bash
git clone https://github.com/isi-nlp/uroman.git
cd uroman
export UROMAN=$(pwd)
```

ุจุนุฏ ุฐููุ ููููู ูุนุงูุฌุฉ ุฅุฏุฎุงู ุงููุต ุจุงุณุชุฎุฏุงู ููุชุทู ุงูููุฏ ุงูุชุงูู. ููููู ุฅูุง ุงูุงุนุชูุงุฏ ุนูู ุงุณุชุฎุฏุงู ูุชุบูุฑ bash

`UROMAN` ููุฅุดุงุฑุฉ ุฅูู ูุณุชูุฏุน uromanุ ุฃู ููููู ุชูุฑูุฑ ุฏููู uroman ูุญุฌุฉ ุฅูู ูุธููุฉ `uromaize`:

```python
import torch
from transformers import VitsTokenizer, VitsModel, set_seed
import os
import subprocess

tokenizer = VitsTokenizer.from_pretrained("facebook/mms-tts-kor")
model = VitsModel.from_pretrained("facebook/mms-tts-kor")

def uromanize(input_string, uroman_path):
    """Convert non-Roman strings to Roman using the `uroman` perl package."""
    script_path = os.path.join(uroman_path, "bin", "uroman.pl")

    command = ["perl", script_path]

    process = subprocess.Popen(command, stdin=subprocess.PIPE, stdout=subprocess.PIPE, stderr=subprocess.PIPE)
    # Execute the perl command
    stdout, stderr = process.communicate(input=input_string.encode())

    if process.returncode != 0:
        raise ValueError(f"Error {process.returncode}: {stderr.decode()}")

    # Return the output as a string and skip the new-line character at the end
    return stdout.decode()[:-1]

text = "์ด๋ด ๋ฌด์จ ์ผ์ด์ผ"
uromaized_text = uromanize(text, uroman_path=os.environ["UROMAN"])

inputs = tokenizer(text=uromaized_text, return_tensors="pt")

set_seed(555)  # make deterministic
with torch.no_grad():
   outputs = model(inputs["input_ids"])

waveform = outputs.waveform[0]
```

**ูุตุงุฆุญ:**

* ุชู ุชุฏุฑูุจ ููุงุท ุชูุชูุด MMS-TTS ุนูู ูุต ููุชูุจ ุจุฃุญุฑู ุตุบูุฑุฉ ุจุฏูู ุนูุงูุงุช ุชุฑููู. ุจุดูู ุงูุชุฑุงุถูุ ูููู `VitsTokenizer` *ุจุชุทุจูุน* ุงูุฅุฏุฎุงูุงุช ุนู ุทุฑูู ุฅุฒุงูุฉ ุฃู ุญุงูุฉ ูุนูุงูุงุช ุชุฑูููุ ูุชุฌูุจ ุชูุฑูุฑ ุงูุฃุญุฑู ุบูุฑ ุงูููุฌูุฏุฉ ูู ุงููุงููุณ ุฅูู ุงููููุฐุฌ. ูุจุงูุชุงููุ ูุฅู ุงููููุฐุฌ ูุง ูููุฒ ุจูู ุงูุญุงูุฉ ูุนูุงูุงุช ุงูุชุฑูููุ ูุฐุง ูุฌุจ ุชุฌูุจูุง ูู ููุฌู ุงููุต. ููููู ุชุนุทูู ุงูุชุทุจูุน ุนู ุทุฑูู ุชุนููู `normalize=False` ูู ููุงููุฉ ุงููุนุงูุฌุ ูููู ูุฐุง ุณูุคุฏู ุฅูู ุณููู ุบูุฑ ูุชููุน ููุง ููุตู ุจู.
* ูููู ุชุบููุฑ ูุนุฏู ุงูููุงู ุนู ุทุฑูู ุชุนููู ุณูุฉ `model.speaking_rate` ุฅูู ูููุฉ ูุฎุชุงุฑุฉ. ูุจุงููุซูุ ูุชู ุงูุชุญูู ูู ุนุดูุงุฆูุฉ ุงูุถูุถุงุก ุจูุงุณุทุฉ `model.noise_scale`:

```python
import torch
from transformers import VitsTokenizer, VitsModel, set_seed

tokenizer = VitsTokenizer.from_pretrained("facebook/mms-tts-eng")
model = VitsModel.from_pretrained("facebook/mms-tts-eng")

inputs = tokenizer(text="Hello - my dog is cute", return_tensors="pt")

# make deterministic
set_seed(555)

# make speech faster and more noisy
model.speaking_rate = 1.5
model.noise_scale = 0.8

with torch.no_grad():
    outputs = model(**inputs)
```
ูู ูุชู ุชุฑุฌูุฉ ุงูุฃุฌุฒุงุก ุงูุชู ุทูุจุช ุชุฑููุง ููุง ูู.

### ุงูุชุนุฑู ุนูู ุงููุบุฉ (LID)
ุชุชููุฑ ููุงุฐุฌ LID ูุฎุชููุฉ ุจูุงุกู ุนูู ุนุฏุฏ ุงููุบุงุช ุงูุชู ูููููุง ุงูุชุนุฑู ุนูููุง - [126](https://huggingface.co/facebook/mms-lid-126)ุ [256](https://huggingface.co/facebook/mms-lid-256)ุ [512](https://huggingface.co/facebook/mms-lid-512)ุ [1024](https://huggingface.co/facebook/mms-lid-1024)ุ [2048](https://huggingface.co/facebook/mms-lid-2048)ุ [4017](https://huggingface.co/facebook/mms-lid-4017).

#### ุงูุงุณุชูุชุงุฌ
ุฃููุงูุ ูููู ุจุชุซุจูุช ููุชุจุฉ ุงููุญููุงุช ูุจุนุถ ุงูููุชุจุงุช ุงูุฃุฎุฑู:

```bash
pip install torch accelerate datasets[audio]
pip install --upgrade transformers
```

ุจุนุฏ ุฐููุ ูููู ุจุชุญููู ุจุนุถ ุนููุงุช ุงูุตูุช ุนุจุฑ `datasets`. ุชุฃูุฏ ูู ุฃู ุจูุงูุงุช ุงูุตูุช ุชู ุฃุฎุฐ ุนููุงุช ูููุง ุจูุนุฏู 16000 ูููู ูุฑุชุฒ.

```py
from datasets import load_dataset, Audio

# English
stream_data = load_dataset("mozilla-foundation/common_voice_13_0", "en", split="test", streaming=True)
stream_data = stream_data.cast_column("audio", Audio(sampling_rate=16000))
en_sample = next(iter(stream_data))["audio"]["array"]

# Arabic
stream_data = load_dataset("mozilla-foundation/common_voice_13_0", "ar", split="test", streaming=True)
stream_data = stream_data.cast_column("audio", Audio(sampling_rate=16000))
ar_sample = next(iter(stream_data))["audio"]["array"]
```

ุจุนุฏ ุฐููุ ูููู ุจุชุญููู ุงููููุฐุฌ ูุงููุนุงูุฌ:

```py
from transformers import Wav2Vec2ForSequenceClassification, AutoFeatureExtractor
import torch

model_id = "facebook/mms-lid-126"

processor = AutoFeatureExtractor.from_pretrained(model_id)
model = Wav2Vec2ForSequenceClassification.from_pretrained(model_id)
```

ุงูุขู ูููู ุจูุนุงูุฌุฉ ุจูุงูุงุช ุงูุตูุชุ ูุฅุฑุณุงู ุจูุงูุงุช ุงูุตูุช ุงููุนุงูุฌุฉ ุฅูู ุงููููุฐุฌ ูุชุตููููุง ุฅูู ูุบุฉุ ุชูุงููุง ููุง ููุนู ุนุงุฏุฉู ูุน ููุงุฐุฌ ุชุตููู ุงูุตูุช Wav2Vec2 ูุซู [ehcalabres/wav2vec2-lg-xlsr-en-speech-emotion-recognition](https://huggingface.co/harshit345/xlsr-wav2vec-speech-emotion-recognition)

```py
# English
inputs = processor(en_sample, sampling_rate=16_000, return_tensors="pt")

with torch.no_grad():
    outputs = model(**inputs).logits

lang_id = torch.argmax(outputs, dim=-1)[0].item()
detected_lang = model.config.id2label[lang_id]
# 'eng'

# Arabic
inputs = processor(ar_sample, sampling_rate=16_000, return_tensors="pt")

with torch.no_grad():
    outputs = model(**inputs).logits

lang_id = torch.argmax(outputs, dim=-1)[0].item()
detected_lang = model.config.id2label[lang_id]
# 'ara'
```

ูุนุฑุถ ุฌููุน ุงููุบุงุช ุงููุฏุนููุฉ ูููุทุฉ ุชูุชูุดุ ููููู ุทุจุงุนุฉ ูุนุฑูุงุช ุงููุบุฉ ููุง ููู:

```py
processor.id2label.values()
```

### ุงูููุงุฐุฌ ุงููุณุจูุฉ ุงูุชุฏุฑูุจ ููุตูุช
ุชุชููุฑ ููุงุฐุฌ ูุณุจูุฉ ุงูุชุฏุฑูุจ ูุญุฌููู ูุฎุชูููู - [300M](https://huggingface.co/facebook/mms-300m)ุ [1Bil](https://huggingface.co/facebook/mms-1b).

<Tip>

ุชุนุชูุฏ ุจููุฉ MMS for ASR ุนูู ูููุฐุฌ Wav2Vec2ุ ุฑุงุฌุน [ุตูุญุฉ ูุซุงุฆู Wav2Vec2](wav2vec2) ููุฒูุฏ ูู ุงูุชูุงุตูู ุญูู ููููุฉ ุงูุถุจุท ุงูุฏููู ูุน ุงูููุงุฐุฌ ููุฎุชูู ุงูููุงู ุงููุฑุนูุฉ.

ูุณุชุฎุฏู MMS-TTS ููุณ ุจููุฉ ุงููููุฐุฌ ูุซู VITSุ ุฑุงุฌุน [ุตูุญุฉ ูุซุงุฆู VITS](vits) ููุฑุฌูุน ุฅูู API.

</Tip>