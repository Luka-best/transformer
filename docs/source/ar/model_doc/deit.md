# DeiT

## ูุธุฑุฉ ุนุงูุฉ
ุงูุชุฑุญ ูููุฐุฌ DeiT ูู ูุฑูุฉ "ุชุฏุฑูุจ ูุญููุงุช ุงูุตูุฑ ุงููุนุงูุฉ ูู ุญูุซ ุงูุจูุงูุงุช ูุงูุชุฏุฑูุณ ูู ุฎูุงู ุงูุงูุชุจุงู" ุจูุงุณุทุฉ Hugo Touvron ูุขุฎุฑูู. ุฃุธูุฑุช ูุญููุงุช ุงูุฑุคูุฉ (ViT) ุงูุชู ุชู ุชูุฏูููุง ูู ูุฑูุฉ Dosovitskiy et al. ุฃู ุฃุญุฏูุง ููููู ูุทุงุจูุฉ ุฃู ุญุชู ุงูุชููู ุนูู ุดุจูุงุช ุนุตุจูุฉ ุชูุงููููุฉ ููุฌูุฏุฉ ุจุงุณุชุฎุฏุงู ูุญูู ุชุดููุฑ (ุดุจูู ุจู BERT). ููุน ุฐููุ ุชุทูุจุช ููุงุฐุฌ ViT ุงูุชู ุชู ุชูุฏูููุง ูู ุชูู ุงููุฑูุฉ ุงูุชุฏุฑูุจ ุนูู ุจููุฉ ุชุญุชูุฉ ููููุฉ ูุนุฏุฉ ุฃุณุงุจูุนุ ุจุงุณุชุฎุฏุงู ุจูุงูุงุช ุฎุงุฑุฌูุฉ. ุชุนุฏ ูุญููุงุช DeiT (ูุญููุงุช ุงูุตูุฑ ุงููุนุงูุฉ ูู ุญูุซ ุงูุจูุงูุงุช) ูุญููุงุช ูุชู ุชุฏุฑูุจูุง ุจููุงุกุฉ ุฃูุจุฑ ูุชุตููู ุงูุตูุฑุ ุญูุซ ุชุชุทูุจ ูููุฉ ุฃูู ุจูุซูุฑ ูู ุงูุจูุงูุงุช ูููุงุฑุฏ ุงูุญูุณุจุฉ ููุงุฑูุฉ ุจููุงุฐุฌ ViT ุงูุฃุตููุฉ.

ุงูููุชุทู ูู ุงููุฑูุฉ ูู ููุง ููู:

*ุฃุธูุฑุช ูุคุฎุฑูุง ุฃู ุงูุดุจูุงุช ุงูุนุตุจูุฉ ุงูุชู ุชุนุชูุฏ ููุท ุนูู ุงูุงูุชุจุงู ูููููุง ูุนุงูุฌุฉ ููุงู ููู ุงูุตูุฑ ูุซู ุชุตููู ุงูุตูุฑ. ููุน ุฐููุ ูุชู ุชุฏุฑูุจ ูุฐู ุงููุญููุงุช ุงููุฑุฆูุฉ ุจุงุณุชุฎุฏุงู ูุฆุงุช ุงูููุงููู ูู ุงูุตูุฑ ุจุงุณุชุฎุฏุงู ุจููุฉ ุชุญุชูุฉ ููููุฉุ ููุง ูุญุฏ ูู ุงุนุชูุงุฏูุง. ูู ูุฐุง ุงูุนููุ ูููู ุจุฅูุดุงุก ูุญูู ุฎุงูู ูู ุงูุถุฑุจุงุช ุงูุชูุงูุณูุฉ ุนู ุทุฑูู ุงูุชุฏุฑูุจ ุนูู ImageNet ููุท. ูููู ุจุชุฏุฑูุจูุง ุนูู ุฌูุงุฒ ููุจููุชุฑ ูุงุญุฏ ูู ุฃูู ูู 3 ุฃูุงู. ูุญูู ูุญูู ุงูุฑุคูุฉ ุงููุฑุฌุนู ุงูุฎุงุต ุจูุง (86 ููููู ูุนููุฉ) ุฏูุฉ ุฃุนูู-1 ุชุจูุบ 83.1ูช (ุชูููู ุงููุทุน ุงููุฑุฏู) ุนูู ImageNet ุฏูู ุฃู ุจูุงูุงุช ุฎุงุฑุฌูุฉ. ูุงูุฃูู ูู ุฐููุ ุฃููุง ููุฏู ุงุณุชุฑุงุชูุฌูุฉ ุงููุนูู-ุงูุทุงูุจ ูุญุฏุฏุฉ ููุญููุงุช. ูุนุชูุฏ ุนูู ุฑูุฒ ุงูุชูุทูุฑ ุงูุฐู ูุถูู ุฃู ูุชุนูู ุงูุทุงูุจ ูู ุงููุนูู ูู ุฎูุงู ุงูุงูุชุจุงู. ููุธูุฑ ุฃูููุฉ ูุฐุง ุงูุชูุทูุฑ ุงููุงุฆู ุนูู ุงูุฑูุฒุ ุฎุงุตุฉ ุนูุฏ ุงุณุชุฎุฏุงู ุดุจูุฉ ุนุตุจูุฉ ุชูุงููููุฉ ููุนูู. ูุคุฏู ุจูุง ุฐูู ุฅูู ุงูุฅุจูุงุบ ุนู ูุชุงุฆุฌ ุชูุงูุณูุฉ ูุน ุงูุดุจูุงุช ุงูุนุตุจูุฉ ุงูุชูุงููููุฉ ููู ูู ImageNet (ุญูุซ ูุญุตู ุนูู ุฏูุฉ ุชุตู ุฅูู 85.2ูช) ูุนูุฏ ููููุง ุฅูู ููุงู ุฃุฎุฑู. ูุดุงุฑู ุงูุฑูุฒ ูุงูููุงุฐุฌ ุงูุฎุงุตุฉ ุจูุง.*

ุชูุช ุงููุณุงููุฉ ุจูุฐุง ุงููููุฐุฌ ุจูุงุณุทุฉ [nielsr](https://huggingface.co/nielsr). ุชูุช ุฅุถุงูุฉ ุฅุตุฏุงุฑ TensorFlow ูู ูุฐุง ุงููููุฐุฌ ุจูุงุณุทุฉ [amyeroberts](https://huggingface.co/amyeroberts).

## ูุตุงุฆุญ ุงูุงุณุชุฎุฏุงู
- ููุงุฑูุฉ ุจู ViTุ ุชุณุชุฎุฏู ููุงุฐุฌ DeiT ูุง ูุณูู ุฑูุฒ ุงูุชูุทูุฑ ููุชุนูู ุจุดูู ูุนุงู ูู ูุนูู (ูุงูุฐูุ ูู ูุฑูุฉ DeiTุ ูู ูููุฐุฌ ูุซู ResNet). ูุชู ุชุนูู ุฑูุฒ ุงูุชูุทูุฑ ูู ุฎูุงู ุงูุงูุชุดุงุฑ ุงูุฎูููุ ุนู ุทุฑูู ุงูุชูุงุนู ูุน ุฑูุฒ ุงููุฆุฉ ูุฑููุฒ ุงูุชุตุญูุญ ูู ุฎูุงู ุทุจูุงุช ุงูุงูุชูุงู ุงูุฐุงุชู.
- ููุงู ุทุฑููุชุงู ูุถุจุท ุงูููุงุฐุฌ ุงูููุทุฑุฉุ ุฅูุง (1) ุจุงูุทุฑููุฉ ุงูููุงุณูููุฉุ ุนู ุทุฑูู ูุถุน ุฑุฃุณ ุชูุจุค ููุท ุฃุนูู ุญุงูุฉ ุงูุฅุฎูุงุก ุงูููุงุฆูุฉ ูุฑููุฒ ุงููุฆุฉ ูุนุฏู ุงุณุชุฎุฏุงู ุฅุดุงุฑุฉ ุงูุชูุทูุฑุ ุฃู (2) ุนู ุทุฑูู ูุถุน ุฑุฃุณ ุชูุจุค ุฃุนูู ูู ูู ุฑูุฒ ุงููุฆุฉ ูุฑูุฒ ุงูุชูุทูุฑ. ูู ูุฐู ุงูุญุงูุฉุ ูุชู ุชุฏุฑูุจ ุฑุฃุณ ุงูุชูุจุค [CLS] ุจุงุณุชุฎุฏุงู ุงูุชูุงุธุฑ ุงููุชูุงุทุน ุงูุนุงุฏู ุจูู ุชูุจุค ุงูุฑุฃุณ ูุงูููุตู ุงูุตุญูุญุ ูู ุญูู ูุชู ุชุฏุฑูุจ ุฑุฃุณ ุงูุชูุทูุฑ ุงูุชูุจุคู ุจุงุณุชุฎุฏุงู ุงูุชูุทูุฑ ุงูุตุนุจ (ุงูุชูุงุธู ุงููุชูุงุทุน ุจูู ุชูุจุค ุฑุฃุณ ุงูุชูุทูุฑ ูุงูููุตู ุงูุฐู ูุชููุนู ุงููุนูู). ูู ููุช ุงูุงุณุชุฏูุงูุ ูุชู ุฃุฎุฐ ูุชูุณุท ุงูุชูุจุค ุจูู ููุง ุงูุฑุฃุณูู ูุชูุจุค ููุงุฆู. (2) ููุทูู ุนููู ุฃูุถูุง "ุงูุถุจุท ุงูุฏููู ูุน ุงูุชูุทูุฑ"ุ ูุฃูู ูุนุชูุฏ ุนูู ูุนูู ุชู ุถุจุทู ุจุงููุนู ุนูู ูุฌููุนุฉ ุงูุจูุงูุงุช ุงูููุงุฆูุฉ. ูู ุญูุซ ุงูููุงุฐุฌุ (1) ููุงุจู [`DeiTForImageClassification`] ู (2) ููุงุจู [`DeiTForImageClassificationWithTeacher`].
- ูุงุญุธ ุฃู ุงููุคูููู ุฃูุถูุง ุญุงูููุง ุงูุชูุทูุฑ ุงููุงุนู ูู (2) (ูู ูุฐู ุงูุญุงูุฉุ ูุชู ุชุฏุฑูุจ ุฑุฃุณ ุงูุชูุจุค ุจุงูุชูุทูุฑ ุจุงุณุชุฎุฏุงู ุงูุญุฑุงู ูููุจุงู-ูุงูุจููุฑ ููุทุงุจูุฉ ุงูุฅุฎุฑุงุฌ ุงููุงุนู ูููุนูู)ุ ูููู ุงูุชูุทูุฑ ุงูุตุนุจ ุฃุนุทู ุฃูุถู ุงููุชุงุฆุฌ.
- ุชู ุฅุฌุฑุงุก ุฌููุน ุนูููุงุช ุงูุชุญูู ูู ุงูุตุญุฉ ุงูููุฑุฌ ุนููุง ูุณุจููุง ูุงูุถุจุท ุงูุฏููู ุนูู ImageNet-1k ููุท. ูู ูุชู ุงุณุชุฎุฏุงู ุฃู ุจูุงูุงุช ุฎุงุฑุฌูุฉ. ูุฐุง ุนูู ุงููููุถ ูู ูููุฐุฌ ViT ุงูุฃุตููุ ูุงูุฐู ุงุณุชุฎุฏู ุจูุงูุงุช ุฎุงุฑุฌูุฉ ูุซู ูุฌููุนุฉ ุจูุงูุงุช JFT-300M/Imagenet-21k ููุถุจุท ุงูุฃููู.
- ุฃุตุฏุฑ ูุคููู DeiT ุฃูุถูุง ููุงุฐุฌ ViT ุงููุฏุฑุจุฉ ุจููุงุกุฉ ุฃูุจุฑุ ูุงูุชู ููููู ุชูุตูููุง ูุจุงุดุฑุฉ ูู [`ViTModel`] ุฃู [`ViTForImageClassification`]. ุชู ุงุณุชุฎุฏุงู ุชูููุงุช ูุซู ุฒูุงุฏุฉ ุงูุจูุงูุงุช ูุงูุชุญุณูู ูุงูุชูุธูู ููุญุงูุงุฉ ุงูุชุฏุฑูุจ ุนูู ูุฌููุนุฉ ุจูุงูุงุช ุฃูุจุฑ ุจูุซูุฑ (ูุน ุงุณุชุฎุฏุงู ImageNet-1k ููุท ููุถุจุท ุงูุฃููู). ููุงู 4 ูุชุบูุฑุงุช ูุชุงุญุฉ (ูู 3 ุฃุญุฌุงู ูุฎุชููุฉ): *facebook/deit-tiny-patch16-224*ุ *facebook/deit-small-patch16-224*ุ *facebook/deit-base-patch16-224* ู *facebook/deit-base-patch16-384*. ูุงุญุธ ุฃูู ูุฌุจ ุงุณุชุฎุฏุงู [`DeiTImageProcessor`] ูุชุญุถูุฑ ุงูุตูุฑ ูููููุฐุฌ.

### ุงุณุชุฎุฏุงู ุงูุงูุชุจุงู ุงูููุชุฌ ุงููุฑุฌุญ ุจุงูููุงุท (SDPA)
ูุชุถูู PyTorch ูุดุบู ุงูุชูุงู ููุชุฌ ูุฑุฌุญ ุจุงูููุงุท (SDPA) ุฃุตูู ูุฌุฒุก ูู `torch.nn.functional`. ุชุดูู ูุฐู ุงูุฏุงูุฉ ุนุฏุฉ ุชูููุฐุงุช ูููู ุชุทุจูููุง ุงุนุชูุงุฏูุง ุนูู ุงููุฏุฎูุงุช ูุงูุฃุฌูุฒุฉ ุงููุณุชุฎุฏูุฉ. ุฑุงุฌุน [ุงููุซุงุฆู ุงูุฑุณููุฉ](https://pytorch.org/docs/stable/generated/torch.nn.functional.scaled_dot_product_attention.html) ุฃู ุตูุญุฉ [GPU Inference](https://huggingface.co/docs/transformers/main/en/perf_infer_gpu_one#pytorch-scaled-dot-product-attention) ููุฒูุฏ ูู ุงููุนูููุงุช.

ูุชู ุงุณุชุฎุฏุงู SDPA ุจุดูู ุงูุชุฑุงุถู ูู `torch>=2.1.1` ุนูุฏูุง ูููู ุงูุชูููุฐ ูุชุงุญูุงุ ูููู ููููู ุฃูุถูุง ุชุนููู `attn_implementation="sdpa"` ูู `from_pretrained()` ูุทูุจ ุงุณุชุฎุฏุงู SDPA ุจุดูู ุตุฑูุญ.

```
from transformers import DeiTForImageClassification
model = DeiTForImageClassification.from_pretrained("facebook/deit-base-distilled-patch16-224", attn_implementation="sdpa", torch_dtype=torch.float16)
...
```

ููุญุตูู ุนูู ุฃูุถู ุงูุชุญุณููุงุชุ ููุตู ุจุชุญููู ุงููููุฐุฌ ุจูุตู ุงูุฏูุฉ (ุนูู ุณุจูู ุงููุซุงู `torch.float16` ุฃู `torch.bfloat16`).

ูู ูุนูุงุฑ ูุญูู (A100-40GBุ PyTorch 2.3.0ุ ูุธุงู ุงูุชุดุบูู Ubuntu 22.04) ูุน `float32` ููููุฐุฌ `facebook/deit-base-distilled-patch16-224`ุ ุฑุฃููุง ุชุณุฑูุนูุง ุงูุชุงูู ุฃุซูุงุก ุงูุงุณุชุฏูุงู.

| ุญุฌู ุงูุฏูุนุฉ | ูุชูุณุท ููุช ุงูุงุณุชุฏูุงู (ูููู ุซุงููุฉ)ุ ูุถุน Eager | ูุชูุณุท ููุช ุงูุงุณุชุฏูุงู (ูููู ุซุงููุฉ)ุ ูููุฐุฌ SDPA | ุชุณุฑูุนุ SDPA / Eager (x) |
|--------------|-------------------------------------------|-------------------------------------------|------------------------------|
| 1 | 8 | 6 | 1.33 |
| 2 | 9 | 6 | 1.5 |
| 4 | 9 | 6 | 1.5 |
| 8 | 8 | 6 | 1.33 |

## ุงูููุงุฑุฏ
ูุงุฆูุฉ ุจููุงุฑุฏ Hugging Face ุงูุฑุณููุฉ ูููุงุฑุฏ ุงููุฌุชูุน (ูุดุงุฑ ุฅูููุง ุจู ๐) ููุณุงุนุฏุชู ูู ุงูุจุฏุก ุจุงุณุชุฎุฏุงู DeiT.

- [`DeiTForImageClassification`] ูุฏุนูู ุจูุงุณุทุฉ [ูุต ุงูุจุฑูุงูุฌ ุงููุตู](https://github.com/huggingface/transformers/tree/main/examples/pytorch/image-classification) ู [ุฏูุชุฑ ุงูููุงุญุธุงุช](https://colab.research.google.com/github/huggingface/notebooks/blob/main/examples/image_classification.ipynb) ูุฐุง.
- ุฑุงุฌุน ุฃูุถูุง: [ุฏููู ููุงู ุชุตููู ุงูุตูุฑ](../tasks/image_classification)

ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู:

- [`DeiTForMaskedImageModeling`] ูุฏุนูู ุจูุงุณุทุฉ [ูุต ุงูุจุฑูุงูุฌ ุงููุตู](https://github.com/huggingface/transformers/tree/main/examples/pytorch/image-pretraining) ูุฐุง.

ุฅุฐุง ููุช ููุชููุง ุจุชูุฏูู ููุฑุฏ ูุฅุฏุฑุงุฌู ููุงุ ููุง ุชุชุฑุฏุฏ ูู ูุชุญ ุทูุจ ุณุญุจ ูุณูุฑุงุฌุนู! ูุฌุจ ุฃู ููุธูุฑ ุงูููุฑุฏ ุงููุซุงูู ุดูุฆูุง ุฌุฏูุฏูุง ุจุฏูุงู ูู ุชูุฑุงุฑ ููุฑุฏ ููุฌูุฏ.

## DeiTConfig

[[autodoc]] DeiTConfig

## DeiTFeatureExtractor

[[autodoc]] DeiTFeatureExtractor

- __call__

## DeiTImageProcessor

[[autodoc]] DeiTImageProcessor

- preprocess

<frameworkcontent>
<pt>

## DeiTModel

[[autodoc]] DeiTModel

- forward

## DeiTForMaskedImageModeling

[[autodoc]] DeiTForMaskedImageModeling

- forward

## DeiTForImageClassification

[[autodoc]] DeiTForImageClassification

- forward

## DeiTForImageClassificationWithTeacher

[[autodoc]] DeiTForImageClassificationWithTeacher

- forward

</pt>
<tf>

## TFDeiTModel

[[autodoc]] TFDeiTModel

- call

## TFDeiTForMaskedImageModeling

[[autodoc]] TFDeiTForMaskedImageModeling

- call

## TFDeiTForImageClassification

[[autodoc]] TFDeiTForImageClassification

- call

## TFDeiTForImageClassificationWithTeacher

[[autodoc]] TFDeiTForImageClassificationWithTeacher

- call

</tf>

</frameworkcontent>